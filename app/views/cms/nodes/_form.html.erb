<%

file = "#{Rails.root}/app/views/" + @item.route.sub('/', '/agents/nodes/') + "/edit/_form.html.erb"

%><dl class="see">
  <dt><%= @model.t :route %><%= @model.tt :route %></dt>
  <dd><%= f.hidden_field :route %>
    <%= @item.label :route %> &nbsp;
    <% case controller.action_name
      when "new", "create" %><%= link_to t('ss.links.change'), routes_cms_nodes_path(base_url: url_for(action: :new, cid: params[:cid])), class: "ajax-box" %></dd>
    <% when "edit", "update" %><%= link_to t('ss.links.change'), routes_cms_nodes_path(base_url: url_for(action: :edit, cid: params[:cid])), class: "ajax-box" %></dd>
    <% end %>

  <dt><%= @model.t :name %><%= @model.tt :title %></dt>
  <dd><%= f.text_field :name %></dd>

  <dt><%= @model.t :index_name %><%= @model.tt :title_for_index %></dt>
  <dd><%= f.text_field :index_name %></dd>

  <dt><%= @model.t :basename %><%= @model.tt :foldername %></dt>
  <dd><%= f.text_field :basename, class: "filename" %></dd>

  <dt><%= @model.t :layout_id %><%= @model.tt :layout_id %></dt>
  <dd><%= f.select :layout_id, ancestral_layouts(@item, @item.layout), include_blank: " " %></dd>
</dl>

<%= render file: file, locals: { f: f } if File.exists?(file) %>
